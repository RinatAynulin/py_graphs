\documentclass{article}
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english, russian]{babel}

\usepackage{geometry}
\geometry{a4paper, top=1cm, bottom=2cm, left=1.5cm, right=1.5cm}

\usepackage{indentfirst}
\usepackage{amssymb,amsfonts,amsmath}
\usepackage{cite,enumerate}
\usepackage[pdftex,colorlinks,unicode,bookmarks]{hyperref}

\usepackage{floatrow}
\usepackage{caption}
\usepackage{subcaption}


\title{
	Сравнение результатов вычислений моего кода и известных мне статей (анализ тестов)
}
\author{Владимир Ивашкин}

\begin{document}

\maketitle

\section{Введение}
Захотелось написать большой развернутый отчет о всех тестах, которые я провожу. Возможно, это поможет найти наши ошибки и в будущем быть уверенными в результатах.

\section{Chebotarev: Studying new classes of graph metrics}
Ссылка: \url{https://arxiv.org/abs/1305.7514}

Здесь нам интересен Fig. 1. На графе "цепочка" можно прогнать такие же метрики при тех же параметрах. В обозначениях ниже я имею в виду, что вершины графа названы слева направо цифрами от 0 до 3. Расстояния здесь нормированы на то, чтобы сумма $D[0, 1] + D[1, 2] + D[2, 3] = 3$.
Достаточно будет сравнивать расстояния $D[0, 1], D[1, 2], D[0, 2], D[0, 3]$.
Будем считать, что расстояния не соответствуют друг другу, если хотя бы одна соответствующая пара расстояний различается на 0.04 в абсолютной величине.

При сравнении выяснилось следующее:
\begin{itemize}
  \item В моем коде из всех ядер, перед тем, как превращать их в расстояния, брался корень. Кажется, мы обсуждали, что это нужно для Communicability, но в итоге это было включено везде. В этом причина, почему тесты не проходили
  \item Для Communicability это все-таки нужно, в этом случае все результаты совпадают
\end{itemize}

Также я воспроизвел результаты из Table 1 в Chebotarev: The Walk Distances in Graphs (ссылка: \url{https://arxiv.org/abs/1103.2059}).
Все это теперь автотесты моего кода, больше таких ошибок допустить не получится.

Итак, здесь мы проверили:
\begin{itemize}
  \item Кернелы
  \begin{itemize}
    \item Shortest path
    \item Resistance
    \item plain Walk
    \item Walk
    \item Forest
    \item logForest
    \item Communicability
  \end{itemize}
  \item Преобразования
  \begin{itemize}
    \item $\alpha \rightarrow t$
    \item $H0 \rightarrow H$
    \item $H \rightarrow D$
   \end{itemize}
\end{itemize}


\section{Kivimaki: Developments in the theory of randomized shortest paths with a article comparison of graph node distances}
Ссылка: \url{https://arxiv.org/abs/1212.1666}

Здесь мы можем использовать два источника: это Figure 2, а также Table 2 с оптимальными значениями из Table 1.

\subsection{Figure 2}
Здесь исследуется поведение метрик RSP, FE, pRes, logFor, SP-CT при изменении их параметров в заданном интервале для графа "треугольник с хвостом". Можно исследовать только крайние точки: слева отношение $\Delta_{12}/\Delta_{23}$ равно 1.5, справа --- 1.0.
После того, как я убрал взятие корня для logFor, все результаты сошлись

\subsection{Table 2 с оптимальными значениями из Table 1}
Здесь проверяется качество кластеризации методом kMeans графов из датасета Newsgroups. Кернелы: RSP, FE, logFor, SP-CT, SCT. Результаты получаются похожими для всех метрик, кроме SP-CT. Результат очень плох: в статье ожидается качество порядка 70-80 NMI*100, по факту что SP, что CT дают 0.2-3 NMI*100. SP-CT применяется с параметром 1, то есть чистый SP. Видим проблему с SP.

\subsection{Итог}
Итак, теперь у нас есть следующее покрытие тестами:
\begin{itemize}
  \item Кернелы
  \begin{itemize}
    \item Shortest path: Kivimaki Fig. 2
    \item Resistance: Kivimaki Fig. 2
    \item SP-CT combination: Kivimaki Table 2 !!!!ошибка
    \item logForest: Chebotarev, Kivimaki Fig. 2, Kivimaki Table 2
    \item SCT: Kivimaki Table 2
    \item RSP: Kivimaki Fig. 2, Kivimaki Table 2
    \item FE: Kivimaki Fig. 2, Kivimaki Table 2
  \end{itemize}
  \item Преобразования
  \begin{itemize}
    \item $H0 \rightarrow H$: Kivimaki Fig. 2, Kivimaki Table 2 
    \item $H \rightarrow D$: Kivimaki Fig. 2
    \item $D \rightarrow K$: Kivimaki Table 2
   \end{itemize}
   \item Датасеты
   \begin{itemize}
     \item Newsgroups: Kivimaki Table 2
   \end{itemize}
\end{itemize}

\section{Sommer: Comparison of Graph Node Distances on Clustering Tasks}
Ссылка: (?)

Здесь нас интересует Table 3 с оптимальными значениями из Table 2.
Метрики: CCT, FE, logFor, RSP, SCT, SP
Датасеты: football, newsgroups, polblogs, zachary
Проблемы: CCT не работает для football, на polblogs не работает ничего, видимо из-за большого размера. Для SP не проходят никакие тесты.

Похоже, все-таки у нас есть проблема.

Как работает SP:
\begin{itemize}
  \item Вызываю shortest\_path из scipy (визуально выдает правильные результаты)
  \item Применяется нормализация, чтобы параметр адекватно смешивал SP и CT
  \item Применяю $D \rightarrow K$ преобразование
\end{itemize}

Больше ничего тут нет. В оправдание функции shortest\_path скажу, что мы проверяли ее тестами выше. Но проблемы с $D \rightarrow K$ тоже быть не может, ведь RSP и FE преобразуются этой же формулой.
Виновата нормализация?

\section{Общий результат}
Здесь я постараюсь записать в единый список всё, что мы используем в коде и наличие тестов.
\begin{itemize}
  \item Кернелы
  \begin{itemize}
    \item Shortest path: Chebotarev, Kivimaki Fig. 2
    \item Resistance: Chebotarev, Kivimaki Fig. 2
    \item SP-CT combination: Kivimaki Table 2 !!!!ошибка
    \item plain Walk: Chebotarev
    \item Walk: Chebotarev
    \item Forest: Chebotarev
    \item logForest: Chebotarev, Kivimaki Fig. 2, Kivimaki Table 2
    \item Communicability: Chebotarev
    \item logCommunicability
    \item Heat:
    \item logHeat:
    \item SCT: Kivimaki Table 2
    \item SCCT:
    \item RSP: Kivimaki Fig. 2, Kivimaki Table 2
    \item FE: Kivimaki Fig. 2, Kivimaki Table 2
  \end{itemize}
  \item Преобразования
  \begin{itemize}
    \item $\alpha \rightarrow t$: Chebotarev
    \item $H0 \rightarrow H$: Chebotarev, Kivimaki Fig. 2, Kivimaki Table 2 
    \item $H \rightarrow D$: Chebotarev, Kivimaki Fig. 2
    \item $D \rightarrow K$: Kivimaki Table 2
   \end{itemize}
   \item Датасеты
   \begin{itemize}
     \item Newsgroups: Kivimaki Table 2
   \end{itemize}
\end{itemize}

\end{document}







